<!doctype html>
<html lang="en">

<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/searchbuilder/1.0.1/css/searchBuilder.bootstrap4.min.css"/>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.3.1/css/select.bootstrap4.min.css"/>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.js"></script>
	<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.js"></script>
	<!--script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/v/dt/dt-1.10.23/sb-1.0.1/sl-1.3.1/datatables.min.js"></script-->
	<script type="text/javascript" src="https://cdn.datatables.net/searchbuilder/1.0.1/js/dataTables.searchBuilder.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/searchbuilder/1.0.1/js/searchBuilder.bootstrap4.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
	<script type="text/javascript" src="js/store.js"></script>
	<script type="text/javascript" src="js/common.js"></script>
</head>

<body>

<nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">Pricelist Scrubber</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
  	<ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="#">Dashboard</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/pricelist.html">Price List</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Part Selector</a>
      </li>
    </ul>
  </div>
</nav>
<div class="container">
	<div class="row" id="widget-row">
	</div>
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function() {
		var watchlist = getWatchlist();
		for (var key in watchlist) {
			var watchdata = watchlist[key];
			var card = $('<div class="card" style="width: 30rem; height: 500px;"></div>').appendTo("#widget-row");
			var cardBody = $('<div class="card-body"></div>').appendTo(card).attr('id', 'card-body-'+key);
			$('<h5 class="card-title"></h5>').text(watchdata.brand + ' ' + watchdata.properties + ' ' + watchdata.description).appendTo(cardBody);
			
			getPriceHist(key, function(data, labels, cdata, xdata) {
				var cardBodyId = "#card-body-"+xdata.sku;
				var canvas = $("<canvas style='width: 100%;height: 300px;'></canvas>").appendTo(cardBodyId);
				$('<button class="btn btn-danger" aria-label="Left Align"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>Remove</button>').appendTo(cardBodyId)
				var ctx = canvas[0].getContext("2d");
				chartData(ctx, labels, cdata);
			});
		}
			
	})
</script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
</body>
</html>