<!doctype html>
<html lang="en">

<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/searchbuilder/1.0.1/css/searchBuilder.bootstrap4.min.css"/>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.3.1/css/select.bootstrap4.min.css"/>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.js"></script>
	<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.js"></script>
	<!--script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/v/dt/dt-1.10.23/sb-1.0.1/sl-1.3.1/datatables.min.js"></script-->
	<script type="text/javascript" src="https://cdn.datatables.net/searchbuilder/1.0.1/js/dataTables.searchBuilder.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/searchbuilder/1.0.1/js/searchBuilder.bootstrap4.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
</head>

<body>
<h1>Pricelist Scrubber</h1>

<h2>PCHUB Data</h2>
<table id="mytable" class="display">
    <thead>
        <tr>
            <th>Category</th>
            <th>Description</th>
			<th>Price</th>
			<th>Availability</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<canvas id="myChart" ></canvas>
<script type="text/javascript">
var cnvs = document.getElementById('myChart');
cnvs.style.width  = '100px';
cnvs.style.height = '200px';
var ctx = cnvs.getContext('2d');
/*var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
			fill: false,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});*/
/*
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['2/9/2020', '2/10/2020', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
            label: 'Amount',
            data: [12, 19, 3, 5, 2, 3],
			fill: false,
			borderColor: 'rgba(250, 100, 100, 1)'
        }]
    },
	options: {
        responsive: true,
		maintainAspectRatio: false
    }
});*/

var table = $('#mytable').DataTable( {
    ajax: '/api/pchub/latest-dt',
	columns: [
        { data: 'category' },
        { data: 'description', 
		  render: function ( data, type, row ) {
                return row.brand + ' ' + row.properties + ' ' + row.description + '<br/> (sku:' + row.sku + ')';
          } 
		},
        { data: 'cashPrice' },
        { data: 'availability' }
    ],
	dom: 'Qlfrtip',
	pageLength: 50
} );

$('#mytable tbody').on('click', 'tr', function () {
	var data = table.row( this ).data();
	alert( 'You clicked on '+data.sku+'\'s row' );
} );
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
</body>
</html>